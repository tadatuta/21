# Gym Gym 21 - Progressive Web App (TMA + Web)

–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–ª—è —Ç—Ä–µ–∫–∏–Ω–≥–∞ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ–∫, —Ä–∞–±–æ—Ç–∞—é—â–µ–µ –∫–∞–∫ Telegram Mini App (TMA) –∏ –∫–∞–∫ —Å–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω–æ–µ PWA (Progressive Web App). –ü–æ–∑–≤–æ–ª—è–µ—Ç –≤–µ—Å—Ç–∏ –¥–Ω–µ–≤–Ω–∏–∫ —É–ø—Ä–∞–∂–Ω–µ–Ω–∏–π (—Å–∏–ª–æ–≤—ã—Ö –∏ –∫–∞—Ä–¥–∏–æ), –æ—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å –ø—Ä–æ–≥—Ä–µ—Å—Å, —Å–æ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å—Å—è —Å –¥—Ä—É–∑—å—è–º–∏ –∏ —Ä–∞–±–æ—Ç–∞—Ç—å –≤ —Ä–µ–∂–∏–º–µ offline-first.

## ‚ú® –û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

### üèãÔ∏è‚Äç‚ôÇÔ∏è –î–Ω–µ–≤–Ω–∏–∫ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ–∫
*   **–ì–∏–±–∫–∏–µ —Ç–∏–ø—ã —É–ø—Ä–∞–∂–Ω–µ–Ω–∏–π**: –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Å–∏–ª–æ–≤—ã—Ö (–≤–µ—Å/–ø–æ–≤—Ç–æ—Ä–µ–Ω–∏—è) –∏ –∫–∞—Ä–¥–∏–æ/–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö —É–ø—Ä–∞–∂–Ω–µ–Ω–∏–π (–º–∏–Ω—É—Ç—ã).
*   **–ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞**: –£–ø—Ä–∞–∂–Ω–µ–Ω–∏—è –≥—Ä—É–ø–ø–∏—Ä—É—é—Ç—Å—è –ø–æ —Å–µ—Å—Å–∏—è–º –∏ –¥–∞—Ç–∞–º.
*   **–¢–∞–π–º–µ—Ä –æ—Ç–¥—ã—Ö–∞**: –í—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π —Ç–∞–π–º–µ—Ä –¥–ª—è –∫–æ–Ω—Ç—Ä–æ–ª—è –æ—Ç–¥—ã—Ö–∞ –º–µ–∂–¥—É –ø–æ–¥—Ö–æ–¥–∞–º–∏.
*   **–ë—ã—Å—Ç—Ä—ã–π –≤–≤–æ–¥**: –î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –ø–æ–¥—Ö–æ–¥–∞ –æ–¥–Ω–∏–º –Ω–∞–∂–∞—Ç–∏–µ–º.
*   **–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ**: –ü–æ–ª–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∏—Å—Ç–æ—Ä–∏–µ–π (–∏–∑–º–µ–Ω–µ–Ω–∏–µ, —É–¥–∞–ª–µ–Ω–∏–µ –∑–∞–ø–∏—Å–µ–π).
*   **Drag-and-Drop**: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–æ—Ä—è–¥–∫–∞ —Ç–∏–ø–æ–≤ —É–ø—Ä–∞–∂–Ω–µ–Ω–∏–π –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö.

### üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏ –ü—Ä–æ–≥—Ä–µ—Å—Å
*   **–û–±—â–∏–π –æ–±—ä–µ–º**: –ü–æ–¥—Å—á–µ—Ç —Ç–æ–Ω–Ω–∞–∂–∞ –∏ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –ø–æ–≤—Ç–æ—Ä–µ–Ω–∏–π.
*   **1RM**: –†–∞—Å—á–µ—Ç –ø—Ä–∏–º–µ—Ä–Ω–æ–≥–æ –æ–¥–Ω–æ–ø–æ–≤—Ç–æ—Ä–Ω–æ–≥–æ –º–∞–∫—Å–∏–º—É–º–∞.
*   **–¢–µ–ø–ª–æ–≤–∞—è –∫–∞—Ä—Ç–∞**: –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ–∫ (–∫–∞–∫ –Ω–∞ GitHub).
*   **–ì—Ä–∞—Ñ–∏–∫–∏**: –î–∏–Ω–∞–º–∏–∫–∞ –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤–µ—Å–æ–≤ –∏ –æ–±—ä–µ–º–æ–≤.
*   **–§–∏–ª—å—Ç—Ä—ã**: –î–µ—Ç–∞–ª—å–Ω—ã–π –∞–Ω–∞–ª–∏–∑ –ø–æ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–º —É–ø—Ä–∞–∂–Ω–µ–Ω–∏—è–º.

### üë• –°–æ—Ü–∏–∞–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
*   **–ü—É–±–ª–∏—á–Ω—ã–µ –ø—Ä–æ—Ñ–∏–ª–∏**: –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –¥–µ–ª–∏—Ç—å—Å—è —Å–≤–æ–∏–º –ø—Ä–æ–≥—Ä–µ—Å—Å–æ–º –ø–æ —Å—Å—ã–ª–∫–µ.
*   **–õ–µ–Ω—Ç–∞ –¥—Ä—É–∑–µ–π**: –ü—Ä–æ—Å–º–æ—Ç—Ä –ø–æ—Å–ª–µ–¥–Ω–∏—Ö —Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ–∫ –¥—Ä—É–∑–µ–π.
*   **–ü—Ä–∏–≤–∞—Ç–Ω–æ—Å—Ç—å**: –ì–∏–±–∫–∏–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –≤–∏–¥–∏–º–æ—Å—Ç–∏ –ø—Ä–æ—Ñ–∏–ª—è.

### ‚òÅÔ∏è –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –∏ Offline-first
*   **PWA**: –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –º–æ–∂–Ω–æ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –Ω–∞ —Ç–µ–ª–µ—Ñ–æ–Ω –∫–∞–∫ –Ω–∞—Ç–∏–≤–Ω–æ–µ.
*   **Offline-first**: –†–∞–±–æ—Ç–∞–µ—Ç –±–µ–∑ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–∞. –î–∞–Ω–Ω—ã–µ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ IndexedDB –∏ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É—é—Ç—Å—è –ø—Ä–∏ –ø–æ—è–≤–ª–µ–Ω–∏–∏ —Å–µ—Ç–∏.
*   **Dual Auth**: –ï–¥–∏–Ω—ã–π –∞–∫–∫–∞—É–Ω—Ç –¥–ª—è Telegram Mini App –∏ Web-–≤–µ—Ä—Å–∏–∏ (—á–µ—Ä–µ–∑ Telegram Widget).
*   **–≠–∫—Å–ø–æ—Ä—Ç/–ò–º–ø–æ—Ä—Ç**: –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –≤—ã–≥—Ä—É–∑–∏—Ç—å –≤—Å–µ —Å–≤–æ–∏ –¥–∞–Ω–Ω—ã–µ –≤ JSON/Markdown –∏–ª–∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∏–∑ —Ä–µ–∑–µ—Ä–≤–Ω–æ–π –∫–æ–ø–∏–∏.

## üõ† –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫

–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –ø–æ—Å—Ç—Ä–æ–µ–Ω–æ –Ω–∞ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –≤–µ–±-—Ç–µ—Ö–Ω–æ–ª–æ–≥–∏—è—Ö —Å —Ñ–æ–∫—É—Å–æ–º –Ω–∞ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –ª–∏—à–Ω–∏—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π.

*   **Frontend**: TypeScript, Vite
*   **UI**: Vanilla CSS + DOM Manipulation (–±–µ–∑ React/Vue –¥–ª—è –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–≥–æ –æ–±–ª–µ–≥—á–µ–Ω–∏—è –±–∞–Ω–¥–ª–∞)
*   **PWA**: `vite-plugin-pwa` (Service Worker, Manifest)
*   **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö (Client)**: `Dexie.js` (IndexedDB wrapper) –¥–ª—è –Ω–∞–¥–µ–∂–Ω–æ–≥–æ –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ —Ö—Ä–∞–Ω–µ–Ω–∏—è.
*   **Backend**: Yandex Cloud Functions (Serverless) –¥–ª—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏.
*   **Auth**: Telegram Auth (InitData –¥–ª—è TMA, Login Widget –¥–ª—è Web).

## üöÄ –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –∑–∞–ø—É—Å–∫

1.  **–£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π**:
    ```bash
    npm install
    ```

2.  **–ó–∞–ø—É—Å–∫ –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞**:
    ```bash
    npm run dev
    ```
    –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–Ω–æ –ø–æ –∞–¥—Ä–µ—Å—É `http://localhost:5173`.
    –î–ª—è —ç–º—É–ª—è—Ü–∏–∏ Telegram —Å—Ä–µ–¥—ã –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `src/telegram-mock.ts`.

3.  **–°–±–æ—Ä–∫–∞ –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞**:
    ```bash
    npm run build
    ```

## üìÇ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

*   `src/main.ts` ‚Äî –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞, –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –∏ —Ä–æ—É—Ç–∏–Ω–≥.
*   `src/db.ts` ‚Äî –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö Dexie.js (—Å—Ö–µ–º—ã —Ç–∞–±–ª–∏—Ü).
*   `src/storage/` ‚Äî –õ–æ–≥–∏–∫–∞ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –¥–∞–Ω–Ω—ã–º–∏ (Repository pattern).
*   `src/services/` ‚Äî –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —Å–µ—Ä–≤–∏—Å—ã (Sync, Telegram API).
*   `src/components/` ‚Äî UI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã (—Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥ HTML).
*   `src/styles/` ‚Äî CSS —Ñ–∞–π–ª—ã (–º–æ–¥—É–ª—å–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞).
*   `src/types/` ‚Äî TypeScript –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã –∏ —Ç–∏–ø—ã.

## üì± –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

*   **SPA-–∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞**: –û–¥–Ω–æ—Å—Ç—Ä–∞–Ω–∏—á–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Å –∫–ª–∏–µ–Ω—Ç—Å–∫–∏–º —Ä–æ—É—Ç–∏–Ω–≥–æ–º.
*   **Optimistic UI**: –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –º–≥–Ω–æ–≤–µ–Ω–Ω–æ, —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –≤ —Ñ–æ–Ω–µ.
*   **–ê–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å**: –ü–æ–ª–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –º–æ–±–∏–ª—å–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤ –∏ –¥–µ—Å–∫—Ç–æ–ø–æ–≤.
*   **–¢–µ–º–∏–∑–∞—Ü–∏—è**: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ CSS Variables –¥–ª—è –ø–æ–¥–¥–µ—Ä–∂–∫–∏ —Ç–µ–º–Ω–æ–π/—Å–≤–µ—Ç–ª–æ–π —Ç–µ–º—ã Telegram.
